<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640">

    <link rel="stylesheet" href="stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Mynewcaffeversionlearning by zhushun0008</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/zhushun0008/myNewCaffeVersionLearning">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Mynewcaffeversionlearning</h1>
            <h2>new Version learning</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/zhushun0008/myNewCaffeVersionLearning/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/zhushun0008/myNewCaffeVersionLearning/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h3>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Welcome to GitHub Pages.</h3>

<p>This automatic page generator is the easiest way to create beautiful pages for all of your projects. Author your page content here using GitHub Flavored Markdown, select a template crafted by a designer, and publish. After your page is generated, you can check out the new branch:</p>

<pre><code>$ cd your_repo_root/repo_name
$ git fetch origin
$ git checkout gh-pages
</code></pre>

<p>If you're using the GitHub for Mac, simply sync your repository and you'll see the new branch.</p>

<h3>
<a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Designer Templates</h3>

<p>We've crafted some handsome templates for you to use. Go ahead and continue to layouts to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved if it remained markdown format.</p>

<h3>
<a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>Rather Drive Stick?</h3>

<p>If you prefer to not use the automatic generator, push a branch named <code>gh-pages</code> to your repository to create a page manually. In addition to supporting regular HTML content, GitHub Pages support Jekyll, a simple, blog aware static site generator written by our own Tom Preston-Werner. Jekyll makes it easy to create site-wide headers and footers without having to copy them across every page. It also offers intelligent blog support and other advanced templating features.</p>

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>You can <a href="https://github.com/blog/821" class="user-mention">@mention</a> a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributor's GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out the documentation at <a href="http://help.github.com/pages">http://help.github.com/pages</a> or contact <a href="mailto:support@github.com">support@github.com</a> and we’ll help you sort it out.</p>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<h4>
<a name="1-cuda-65-toolkits" class="anchor" href="#1-cuda-65-toolkits"><span class="octicon octicon-link"></span></a>1. Cuda 6.5 toolkits</h4>

<ol>
<li>Download cuda-6.5 from NVIDIA</li>
<li>Uninstall the current driver and install new driver and cuda-6.5 toolkits</li>
</ol>

<pre><code>1. sudo service lightdm stop (stop display)
2. CRTL + ALT + F1 (Change to command line)
3. sudo sh cuda-6.5-run
</code></pre>

<ol>
<li>
<p>Setup Environment</p>

<pre><code>export PATH=/usr/local/cuda-6.5/bin:$PATH

export LD_LIBRARY_PATH=/usr/local/cuda-6.5/lib64:$LD_LIBRARY_PATH
</code></pre>
</li>
<li>
<p>GPU Test</p>

<ul>
<li>Go to </li>
</ul>

<pre><code>
</code></pre>
</li>
<li>
new Version learning
<blockquote cite="http://developer.mozilla.org">
<p>This is a quotation taken from the Mozilla Developer Center.</p>
</blockquote>
</li>
</ol>

<h3>
<a name="2-matlab-wapper" class="anchor" href="#2-matlab-wapper"><span class="octicon octicon-link"></span></a>2. Matlab Wapper</h3>

<h4>
<a name="1-install-matlab-under-linux" class="anchor" href="#1-install-matlab-under-linux"><span class="octicon octicon-link"></span></a>1. install Matlab under Linux</h4>

<ul>
<li>download address: <a href="http://xxxx.need.to.add.com">http://xxxx.need.to.add.com</a>
</li>
<li>
<p>Install Process
</p>
<blockquote>
<p></p>

<ol>
<li><p>run "setup.exe" (or "bin\win32\setup.exe" to install 32-bit Matlab under 64-bit Windows)</p></li>
<li><p>choose <strong><em>"install manually without using the internet"</em></strong>       </p></li>
<li><p>set the "file installation key" to be <strong><em>25716-63335-16746-06072</em></strong></p></li>
<li><p>setup Matlab with required components</p></li>
<li><p>when asked to activate the product select <strong><em>“Activate manually without internet”</em></strong></p></li>
<li>
<p>select "X:\serial\license.lic" when asked for license file (where "X" is drive letter amounted under /mnt/* of my Linux)
</p>
</li>
</ol>
</blockquote>
</li>

</ul>

<h3>
<a name="3-python-wapper" class="anchor" href="#3-python-wapper"><span class="octicon octicon-link"></span></a>3. Python Wapper</h3>

<h5>
<a name="install-dependency-packages" class="anchor" href="#install-dependency-packages"><span class="octicon octicon-link"></span></a>Install dependency packages</h5>

<blockquote>
<pre><code>Cython&gt;=0.19.2
</code></pre>
</blockquote>

<pre><code>numpy&gt;=1.7.1

scipy&gt;=0.13.2

scikit-image&gt;=0.9.3

scikit-learn&gt;=0.14.1

***matplotlib&gt;=1.3.1***

ipython&gt;=1.1.0

h5py&gt;=2.2.0

leveldb&gt;=0.191

networkx&gt;=1.8.1

nose&gt;=1.3.0

pandas&gt;=0.12.0

python-dateutil&gt;=1.4,&lt;2

protobuf&gt;=2.5.0

python-gflags&gt;=2.0
</code></pre>

<blockquote>
</blockquote>

<pre><code>    $ sudo pip install -r /path/to/caffe-master/python/requirements.txt 
</code></pre>

<ul>
<li>
<p>When errors occur, note the information on the screen to install the necessary packages
</p>
<blockquote>
[...]
Downloading/unpacking matplotlib&gt;=1.3.1 (from -r python/requirements.txt (line 6))
Downloading matplotlib-1.4.2.tar.gz (50.1Mb): 50.1Mb downloaded
Running setup.py egg_info for package matplotlib
  The required version of distribute (&gt;=0.6.28) is not available,
  and can't be installed while this script is running. Please
  install a more recent version first, using
  'easy_install -U distribute'.

<p>(Currently using distribute 0.6.24dev-r0 (/usr/lib/python2.7/dist-packages))
  Complete output from command python setup.py egg_info:
  The required version of distribute (&gt;=0.6.28) is not available,</p>
</blockquote>
</li>
</ul>

<p>and can't be installed while this script is running. Please</p>

<p><strong><em>install a more recent version first</em></strong>, using</p>

<p><strong><em>'easy_install -U distribute'</em></strong>.</p>

<p>[...]</p>

<p></p>

<ol>
<li>run following scripts under caffe-master(caffe_root directory)</li>
</ol>

<pre><code>    make all 
    make pycaffe
    make distribute
    export PYTHONPATH=/home/zhuzhu/share_zhu/caffe-master/python

</code></pre>

<ol>
<li>Check <strong><em>import caffe</em></strong>
</li>
</ol>

<pre><code>    open ipython notebook
    cd **/caffe-master/python (go to the directory of caffe/python)
    import caffe
</code></pre>

<p>error fixed</p>

<ul>
<li>Install scikit-image</li>
</ul>

<pre><code>
$ sudo pip install scikit-image  
    ImportError: You need `six` version 1.3 or later.
$ sudo pip install six  
$ sudo pip install -U scikit-image  

</code></pre>

<ol>
<li>
<a href="http://blog.csdn.net/u011333059/article/details/38078617">http://blog.csdn.net/u011333059/article/details/38078617</a>
</li>
</ol>

<h4>
<a name="install-cmake-289" class="anchor" href="#install-cmake-289"><span class="octicon octicon-link"></span></a>install cmake 2.8.9</h4>

<p>Note that in <strong><em>Ubuntu 12.04</em></strong>, Aptitude will install version <strong><em>CMake 2.8.7 by default</em></strong>, which is <strong><em>not supported by Caffe’s CMake build</em></strong> (requires at least 2.8.8). As a workaround
if you are using Ubuntu 12.04 you can try the <strong><em>following steps to install CMake 2.8.9</em></strong>:</p>

<pre><code>    sudo add-apt-repository ppa:ubuntu-sdk-team/ppa -y

    sudo apt-get -y update

    sudo apt-get install cmake
</code></pre>

<h4>
<a name="install-glog-gflags-and-lmdb-after-cmake-289-installed" class="anchor" href="#install-glog-gflags-and-lmdb-after-cmake-289-installed"><span class="octicon octicon-link"></span></a>Install <strong><em>glog</em></strong>, <strong><em>gflags</em></strong> and <strong><em>lmdb after</em></strong> CMake 2.8.9 installed</h4>

<p>1.Download and Install glog before gflags</p>

<pre><code>    wget https://google-glog.googlecode.com/files/glog-0.3.3.tar.gz

    tar zxvf glog-0.3.3.tar.gz

    cd glog-0.3.3

    ./configure

    make &amp;&amp; make install

</code></pre>

<ol>
<li>Download and Install gflags</li>
</ol>

<pre><code>    wget https://github.com/schuhschuh/gflags/archive/master.zip

    unzip master.zip

    cd gflags-master

    mkdir build &amp;&amp; cd build

    export CXXFLAGS="-fPIC" &amp;&amp; cmake .. &amp;&amp; make VERBOSE=1

    make &amp;&amp; make install
</code></pre>

<ol>
<li>Download and Install lmdb</li>
</ol>

<pre><code>    git clone git://gitorious.org/mdb/mdb.git

    cd mdb/libraries/liblmdb

    make &amp;&amp; make install
</code></pre>

<h3>
<a name="get-trained-models" class="anchor" href="#get-trained-models"><span class="octicon octicon-link"></span></a>Get trained Models</h3>

<ul>
<li>run python script

<ul>
<li>dependency</li>
<li>pip search yaml</li>
<li>  sudo pip install yaml</li>
</ul>
</li>
</ul>

<h2>
<a name="case-study" class="anchor" href="#case-study"><span class="octicon octicon-link"></span></a>Case Study</h2>

<h3>
<a name="1-fine-tuning-caffenet-for-style-recognition-on-flickr-style-data" class="anchor" href="#1-fine-tuning-caffenet-for-style-recognition-on-flickr-style-data"><span class="octicon octicon-link"></span></a><strong><em>1. Fine-tuning CaffeNet for Style Recognition on “Flickr Style” Data</em></strong>
</h3>

<ul>
<li>Go to <a href="http://caffe.berkeleyvision.org/gathered/examples/finetune_flickr_style.html">Finetune Flickr_stype Tutorial Page</a> to see:

<ul>
<li>How to define new model to <strong><em>reuse the trained weights</em></strong>
</li>
<li>How to adapt learning parameters to speed up learning process</li>
</ul>
</li>
<li><strong><em>My Command</em></strong></li>
</ul>

<p><strong><em>Note: running all following commands under caffe_root directory</em></strong></p>

<p>1.Download data</p>

<pre><code>    caffe-master$ python examples/finetune_flickr_style/assemble_data.py --workers=-1 --images=2000 --seed 831486

</code></pre>

<p>When it's done, following messages will show on the screen</p>

<pre><code>    Downloading 2000 images with 7 workers...
    Writing train/val for 1921(1931 in reference page) successfully downloaded images.

</code></pre>

<p>2.Get trained bvlc net</p>

<pre><code>    caffe-master$ ./scripts/download_model_binary.py models/bvlc_reference_caffenet.

</code></pre>

<p>When it's done, the follow messages will be showed on the screen</p>

<p>3.Train fine-tune net with pre-trained net</p>

<pre><code>    caffe-master$ ./build/tools/caffe train -solver models/finetune_flickr_style/solver.prototxt -weights models/bvlc_reference_caffenet/bvlc_reference_caffenet.caffemodel -gpu 0

</code></pre>

<p>When it runs, a lot of information will on the screen</p>

<pre><code>    [...]

    I0828 22:10:04.025378  9718 solver.cpp:46] Solver scaffolding done.
    I0828 22:10:04.025388  9718 caffe.cpp:95] Use GPU with device ID 0
    I0828 22:10:04.192004  9718 caffe.cpp:107] Finetuning from models/bvlc_reference_caffenet/bvlc_reference_caffenet.caffemodel

    [...]

    I0828 22:18:19.700461 11510 solver.cpp:397] Iteration 20, lr = 0.001
    I0828 22:18:24.924685 11510 solver.cpp:195] Iteration 40, loss = 2.18531
    I0828 22:18:24.924741 11510 solver.cpp:397] Iteration 40, lr = 0.001
    I0828 22:18:30.114858 11510 solver.cpp:195] Iteration 60, loss = 2.4915
    I0828 22:18:30.114910 11510 solver.cpp:397] Iteration 60, lr = 0.001
    I0828 22:18:35.328071 11510 solver.cpp:195] Iteration 80, loss = 2.04539
    I0828 22:18:35.328127 11510 solver.cpp:397] Iteration 80, lr = 0.001
    I0828 22:18:40.588317 11510 solver.cpp:195] Iteration 100, loss = 2.1924
    I0828 22:18:40.588373 11510 solver.cpp:397] Iteration 100, lr = 0.001
    I0828 22:18:46.171576 11510 solver.cpp:195] Iteration 120, loss = 2.25107
    I0828 22:18:46.171669 11510 solver.cpp:397] Iteration 120, lr = 0.001

    [...]

</code></pre>

<p>If we are eager to check all the information ,just run the command instead of previous one</p>

<pre><code>    caffe-master$ ./build/tools/caffe train -solver models/finetune_flickr_style/solver.prototxt -weights models/bvlc_reference_caffenet/bvlc_reference_caffenet.caffemodel -gpu 0 &gt;&amp;./trainFinetuneNetLog.txt

</code></pre>

<h3>
<a name="tutorials-for-caffe" class="anchor" href="#tutorials-for-caffe"><span class="octicon octicon-link"></span></a>Tutorials For Caffe</h3>

<p>Reference to <a href="http://caffe.berkeleyvision.org/tutorial/">Tutorials</a> </p>

<h3>
<a name="examples-from-caffe-website" class="anchor" href="#examples-from-caffe-website"><span class="octicon octicon-link"></span></a>Examples From Caffe Website</h3>

<h3>
<a name="reference" class="anchor" href="#reference"><span class="octicon octicon-link"></span></a>Reference</h3>

<p>[1].(<a href="http://blog.csdn.net/lingerlanlan/article/details/24379689">http://blog.csdn.net/lingerlanlan/article/details/24379689</a>)</p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/zhushun0008">zhushun0008</a> can be found on <a href="https://github.com/zhushun0008/myNewCaffeVersionLearning">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
